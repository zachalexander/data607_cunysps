---
title: "DATA 607 - Project 4"
author: "Zach Alexander"
date: "October 28, 2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tm)
library(stringr)
library(SnowballC)
library(tidyverse)
library(stringi)
library(corpus)
```

## R Markdown

```{r}
spam <- VCorpus(DirSource(directory = 'C:/Users/zalexander/Desktop/data607_cunysps/Project4/spam'))

for(i in 1:length(spam)){
  as_corpus_text(iconv(content(spam[[i]]), "Latin1", "UTF-8", sub = ""))
  meta(spam[[i]], "email_group") <- "spam"
}


ham <- VCorpus(DirSource(directory = 'C:/Users/zalexander/Desktop/data607_cunysps/Project4/easy_ham'))
ham

for(i in 1:length(ham)){
  as_corpus_text(iconv(content(ham[[i]]), "Latin1", "UTF-8", sub = ""))
  meta(ham[[i]], "email_group") <- "ham"
}

all_emails <- c(spam, ham)
```

```{r}
all_emails = tm_map(all_emails, removeNumbers)
all_emails = tm_map(all_emails, removePunctuation)
all_emails = tm_map(all_emails, stripWhitespace)

## not working on Mac
all_emails <- tm_map(all_emails, removeWords, stopwords("english"))
all_emails <- tm_map(all_emails, content_transformer(tolower))

all_emails[[2]]$content
```


```{r}
analysis <- all_emails %>%
  meta(tag = "email_group") %>%
  unlist() %>%
  table() 
analysis
```

