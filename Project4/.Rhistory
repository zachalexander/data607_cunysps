knitr::opts_chunk$set(echo = TRUE)
library(tm)
library(stringr)
library(SnowballC)
library(tidyverse)
library(stringi)
library(corpus)
install.packages('corpus')
knitr::opts_chunk$set(echo = TRUE)
library(tm)
library(stringr)
library(SnowballC)
library(tidyverse)
library(stringi)
library(corpus)
spam <- VCorpus(DirSource(directory = '/Users/zdalexander/Desktop/grad_school/data_607_cunysps/data607_cunysps/Project4/spam'))
spam <- VCorpus(DirSource(directory = 'C:/Users/zdalexander/data607_cunysps/Project4/spam'))
spam <- VCorpus(DirSource(directory = 'C:/Users/zalexander/data607_cunysps/Project4/spam'))
spam <- VCorpus(DirSource(directory = 'C:/Users/zalexander/Desktop/data607_cunysps/Project4/spam'))
for(i in 1:length(spam)){
as_corpus_text(iconv(content(spam[[i]]), "Latin1", "UTF-8", sub = ""))
meta(spam[[i]], "email_group") <- "spam"
}
ham <- VCorpus(DirSource(directory = 'C:/Users/zalexander/Desktop/data607_cunysps/Project4/easy_ham'))
ham
for(i in 1:length(ham)){
as_corpus_text(iconv(content(ham[[i]]), "Latin1", "UTF-8", sub = ""))
meta(ham[[i]], "email_group") <- "ham"
}
all_emails <- c(spam, ham)
all_emails = tm_map(all_emails, removeNumbers)
all_emails = tm_map(all_emails, removePunctuation)
all_emails = tm_map(all_emails, stripWhitespace)
## not working
all_emails <- tm_map(all_emails, removeWords, stopwords("english"))
all_emails <- tm_map(all_emails, content_transformer(tolower))
all_emails[[2]]$content
analysis <- all_emails %>%
meta(tag = "email_group") %>%
unlist() %>%
table()
analysis
temp <- tempfile()
download.file("https://spamassassin.apache.org/old/publiccorpus/20021010_easy_ham.tar.bz2",temp)
data <- read.table(unz(temp, "a1.dat"))
temp <- tempfile()
download.file("https://spamassassin.apache.org/old/publiccorpus/20021010_easy_ham.tar.bz2", temp)
data <- read.table(unz(temp, "a1.dat"))
temp <- tempfile()
download.file("https://spamassassin.apache.org/old/publiccorpus/20021010_easy_ham.tar.bz2", temp)
data <- read.table(untar(temp, "a1.dat"), list = TRUE)
temp <- tempfile()
download.file("https://spamassassin.apache.org/old/publiccorpus/20021010_easy_ham.tar.bz2", temp)
data <- read.table(untar(temp, "a1.dat"))
temp <- tempfile()
download.file("https://spamassassin.apache.org/old/publiccorpus/20021010_easy_ham.tar.bz2", temp)
data <- read.table(untar(temp))
temp <- download.file("https://spamassassin.apache.org/old/publiccorpus/20021010_easy_ham.tar.bz2")
temp <- download.file(destfile = "https://spamassassin.apache.org/old/publiccorpus/20021010_easy_ham.tar.bz2")
url <- "https://spamassassin.apache.org/old/publiccorpus/20021010_easy_ham.tar.bz2"
temp <- download.file(url, destfile = "tmp.tar.bz2")
data <- read.table(untar(temp))
url <- "https://spamassassin.apache.org/old/publiccorpus/20021010_easy_ham.tar.bz2"
download.file(url, destfile = "tmp.tar.bz2")
data <- read.table(untar("tmp.tar.bz2"))
